<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì˜¤ëŠ˜ ê·¸ë¦´ ê·¸ë¦¼ì€? | ì¡°ì•½ëŒ ë§ˆì„</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* 3D ì¹´ë“œ + ì‚¬íŒŒë¦¬ ëŒ€ì‘ */
    .scene { perspective: 1200px; -webkit-perspective: 1200px; }
    .card {
      transform-style: preserve-3d; -webkit-transform-style: preserve-3d;
      transition: transform .8s cubic-bezier(.2,.8,.2,1);
      will-change: transform;
    }
    .card.is-flipped { transform: rotateY(180deg); }
    .card-face { backface-visibility: hidden; -webkit-backface-visibility: hidden; }
    .card-back { transform: rotateY(180deg); }
    /* ë³´ì´ì§€ ì•ŠëŠ” ë©´ ì™„ì „ ìˆ¨ê¹€(ê²€ì€ í™”ë©´ ë°©ì§€) */
    .hidden-face { opacity: 0; pointer-events: none; }
    .visible-face { opacity: 1; pointer-events: auto; }
    .focus-ring { outline: none; }
    .focus-ring:focus { box-shadow: 0 0 0 2px rgba(251,191,36,.6); }
  </style>
</head>
<body class="min-h-screen w-full bg-gradient-to-br from-[#0f172a] via-[#111827] to-[#1f2937] text-white flex items-center justify-center p-4">
  <div id="app" class="w-full max-w-lg"></div>

  <script>
    /* ---------- ë°ì´í„° (45ê°€ì§€) ---------- */
    const CATEGORIES = ["ëŒ€í™”","ê°ì •","ìƒí™©"];
    const SITUATIONS = [
      { id:1,title:"ì¶•í•˜í•˜ëŠ” ëŒ€í™” ìƒí™©",category:"ëŒ€í™”",examples:["ì¼€ì´í¬","í­ì£½","ê½ƒê°€ë£¨","íŒŒí‹°ëª¨ì","'ì¶•í•˜í•´!' ë§í’ì„ "] },
      { id:2,title:"ìœ„ë¡œí•´ì£¼ëŠ” ëŒ€í™” ìƒí™©",category:"ëŒ€í™”",examples:["í† ë‹¥í† ë‹¥ ì†","ë”°ëœ»í•œ ë‹´ìš”","í‹°ìŠˆ","í•˜íŠ¸ í•«íŒ©","'ê´œì°®ì•„' ë§í’ì„ "] },
      { id:3,title:"ìƒë‹´í•´ì£¼ëŠ” ëŒ€í™” ìƒí™©",category:"ëŒ€í™”",examples:["ë…¸íŠ¸ì™€ íœ","í—¤ë“œì…‹","ìƒë‹´ì†Œ ê°„íŒ","ì²´í¬ë¦¬ìŠ¤íŠ¸","ìƒê° êµ¬ë¦„"] },
      { id:4,title:"ì”ì†Œë¦¬í•˜ëŠ” ìƒí™©",category:"ëŒ€í™”",examples:["í—ˆë¦¬ì— ì†","ì†ê°€ë½ ì§šê¸°","í˜¸ë£¨ë¼ê¸°","ê²½ê³  í‘œì§€","ì°Œë¦¿ ëˆˆì¹"] },
      { id:5,title:"ì• êµë¶€ë¦¬ëŠ” ìƒí™©",category:"ê°ì •",examples:["ë°˜ì§ëˆˆ","í•˜íŠ¸ ë¿…","ë¸Œì´ í¬ì¦ˆ","ë³¼ ì½•","ë‹¬ì½¤ ë§í’ì„ "] },
      { id:6,title:"ì›ƒëŠ” ìƒí™©",category:"ê°ì •",examples:["ëˆˆì›ƒìŒ","ë°•ì¥ëŒ€ì†Œ","'ã…‹ã…‹' ë§í’ì„ ","ì›ƒìŒ ëˆˆë¬¼","í•˜ì´íŒŒì´ë¸Œ"] },
      { id:7,title:"ìš°ëŠ” ìƒí™©",category:"ê°ì •",examples:["ëšëš ëˆˆë¬¼","ìš¸ë¨¹ ë§í’ì„ ","íœ´ì§€","ì½§ë¬¼ ë°©ìš¸","ë¹—ë°©ìš¸ ë°°ê²½"] },
      { id:8,title:"ìŠ¬í¼í•˜ëŠ” ìƒí™©",category:"ê°ì •",examples:["ê³ ê°œ í‘¹","ë¹„êµ¬ë¦„","íšŒìƒ‰ ë°°ê²½","ì‘ì•„ì§„ ìì„¸","í•œìˆ¨ ë§í’ì„ "] },
      { id:9,title:"ë©‹ì©ì–´í•˜ëŠ” ìƒí™©(ë¯¼ë§)",category:"ê°ì •",examples:["ë’·ë¨¸ë¦¬ ê¸ì ","ì‹ì€ë•€","ë³¼ ë°œê·¸ë ˆ","ì‹œì„  íšŒí”¼","ë¨¸ì“± í‘œì •"] },
      { id:10,title:"ë¶€íƒí•˜ëŠ” ìƒí™©",category:"ëŒ€í™”",examples:["í•©ì¥ ì†","ë°˜ì§ ëˆˆë¹›","'ì œë°œ~' ë§í’ì„ ","ë¦¬ë³¸ ìƒì","ê³ ê°œ ë„ë•"] },
      { id:11,title:"ê°ì‚¬í•˜ëŠ” ìƒí™©",category:"ëŒ€í™”",examples:["ê¾¸ë²… ì¸ì‚¬","ê°ì‚¬ ì¹´ë“œ","ì„ ë¬¼ ìƒì","'ê³ ë§ˆì›Œ' ë§í’ì„ ","ê½ƒë‹¤ë°œ"] },
      { id:12,title:"ë§ˆë¬´ë¦¬ ì¸ì‚¬í•˜ëŠ” ìƒí™©",category:"ëŒ€í™”",examples:["ì† í”ë“¤ê¸°","ì˜ì ëª¨ì","ë¬¸ ë‹«í˜","ë³„Â·ë‹¬ ë°°ê²½","'ì•ˆë…•~' ë§í’ì„ "] },
      { id:13,title:"í™”ë‚´ëŠ” ìƒí™© (ë²„ëŸ­)",category:"ê°ì •",examples:["ë¶ˆê½ƒ ëˆˆì¹","ì¦ê¸° ë¶„ì¶œ","ë¶„ë…¸ ê²Œì´ì§€","ë¹¨ê°„ ë°°ê²½","ë²ˆê°œ ì´í™íŠ¸"] },
      { id:14,title:"ë†€ë¼ëŠ” ìƒí™© (í—‰!)",category:"ê°ì •",examples:["ë™ê·¸ë€ ëˆˆ","ê°íƒ„ ë¶€í˜¸!","ì í”„","ë¨¸ë¦¬ ê³¤ë‘ì„¬","'í—‰' ë§í’ì„ "] },
      { id:15,title:"ì‚¬ë‘ ê³ ë°±/ì• ì • í‘œí˜„",category:"ëŒ€í™”",examples:["í•˜íŠ¸ ëˆˆ","ìª½! í‚¤ìŠ¤","ê½ƒë‹¤ë°œ","ëŸ¬ë¸Œ ë ˆí„°","í•˜íŠ¸ ë°°ê²½"] },
      { id:16,title:"ì‹¬ì‹¬í•  ë•Œ",category:"ìƒí™©",examples:["í•˜í’ˆ","íƒìƒì‹œê³„","ë³¼ ê¸ì ","ì‹¬ë“œë  í‘œì •","í‹ˆìƒˆ ë‚™ì„œ"] },
      { id:17,title:"í”¼ê³¤í•˜ê±°ë‚˜ ì§€ì¹œ ìƒí™©",category:"ìƒí™©",examples:["ë‹¤í¬ì„œí´","ì»¤í”¼","ëˆˆ ë°˜ì¯¤ ê°ê¹€","ê¸°ì§€ê°œ","zzz ë§í’ì„ "] },
      { id:18,title:"ë“ì˜ì–‘ì–‘/ìë‘",category:"ê°ì •",examples:["ì„ ê¸€ë¼ìŠ¤","ì—„ì§€ì²™","íŠ¸ë¡œí”¼","ë°˜ì§ íš¨ê³¼","ìì‹ ë§Œë§Œ í¬ì¦ˆ"] },
      { id:19,title:"ì¥ë‚œì¹˜ëŠ” ìƒí™©",category:"ìƒí™©",examples:["ë©”ë¡±","ê¹œì§ ìƒì","ì¥ë‚œ ì¢…","ëª°ì¹´ ì¹´ë©”ë¼","ì¥ë‚œ ìŠ¤í‹°ì»¤"] },
      { id:20,title:"ê¸°ë‹¤ë¦¬ëŠ” ìƒí™© (ì–¸ì œ ì™€?)",category:"ìƒí™©",examples:["ëª¨ë˜ì‹œê³„","ì‹œê³„ ì‘ì‹œ","ë¬¸ ì³ë‹¤ë´„","ë°œ ë™ë™","'ì–¸ì œì™€?' ë§í’ì„ "] },
      { id:21,title:"ê³ ë¯¼í•˜ëŠ” ìƒí™© (í â€¦)",category:"ê°ì •",examples:["í„± ê´´ê¸°","ë¬¼ìŒí‘œ","ë¯¸ë¡œ","ë°©ìš¸ë•€","ì €ìš¸ ì•„ì´ì½˜"] },
      { id:22,title:"ë„ë§ê°€ê±°ë‚˜ íšŒí”¼",category:"ìƒí™©",examples:["ë¨¼ì§€ êµ¬ë¦„","ì‹ì€ë•€","ìˆ¨ê¸°","ë’¤ëŒì•„ ë„ë§","ë²½ ë’¤ í›”ì³ë³´ê¸°"] },
      { id:23,title:"ì‚¬ê³¼í•˜ëŠ” ìƒí™©",category:"ëŒ€í™”",examples:["ë‘ ì† ëª¨ì•„ ì‚¬ê³¼","ì‚¬ê³¼ ì¹´ë“œ","'ë¯¸ì•ˆí•´' ë§í’ì„ ","ê³ ê°œ ìˆ™ì„","ì‘ì•„ì§„ ìºë¦­í„°"] },
      { id:24,title:"ê³µê°/ë§ì¥êµ¬",category:"ëŒ€í™”",examples:["ë„ë•ë„ë•","'ã…‡ã…‡' ë§í’ì„ ","ì†ë¼‰ ì²™","ì‹±ê¸‹ ë¯¸ì†Œ","ë™ê·¸ë¼ë¯¸ í‘œì‹œ"] },
      { id:25,title:"ì•½ì†/ì‹œê°„ ì¡ê¸°",category:"ëŒ€í™”",examples:["ë‹¬ë ¥","ì‹œê³„","ì²´í¬ ì•„ì´ì½˜","ë©”ì‹ ì € ë§í’ì„ ","ì•½ì† ë„ì¥"] },
      { id:26,title:"ì‘ì›/íŒŒì´íŒ…",category:"ëŒ€í™”",examples:["ì‘ì›ë´‰/ë©”ê°€í°","'íŒŒì´íŒ…!'","ê·¼ìœ¡ í¬ì¦ˆ","ê¹ƒë°œ","ë¶ˆê½ƒ íš¨ê³¼"] },
      { id:27,title:"ì¹­ì°¬í•˜ê¸°",category:"ëŒ€í™”",examples:["ë³„ ìŠ¤í‹°ì»¤","ì¹­ì°¬ ë„ì¥","ì™•ê´€","ì—„ì§€ì²™","'ìµœê³ !'"] },
      { id:28,title:"ë°°ê³ í”ˆ ìƒí™©",category:"ìƒí™©",examples:["ê¼¬ë¥´ë¥µ","ìˆ˜ì € í¬í¬","ê¹€ë‚˜ëŠ” ìŒì‹","ì¹¨ ë°©ìš¸","ë¹ˆ ì ‘ì‹œ"] },
      { id:29,title:"ì§€ê°/í—ˆë‘¥ì§€ë‘¥",category:"ìƒí™©",examples:["ì•ŒëŒ í­ë°œ","í—ë ˆë²Œë–¡","ë•€ë°©ìš¸","ë„˜ì–´ì§„ ìš´ë™í™”","'ì§€ê°!'"] },
      { id:30,title:"ì„ ë¬¼/ì„œí”„ë¼ì´ì¦ˆ",category:"ëŒ€í™”",examples:["ë¦¬ë³¸ ìƒì","ì¹´ë“œ","í•˜íŠ¸ íƒœê·¸","ì „ë‹¬ ì œìŠ¤ì²˜","í­ì£½"] },
      { id:31,title:"ëˆˆì¹˜ ë³´ê¸°",category:"ê°ì •",examples:["íë”","ì ì ì ","ì‹ì€ë•€ í•œ ë°©ìš¸","ì‘ì•„ì§€ê¸°","ì»¤íŠ¼ ë’¤ íë”"] },
      { id:32,title:"ë¹„ë°€/ì‰¿",category:"ëŒ€í™”",examples:["ì…ì— ì†ê°€ë½","ì§€í¼ ì…","ìë¬¼ì‡ ","ì‘ì€ ë§í’ì„ ","ì–´ë‘ìš´ ë°°ê²½"] },
      { id:33,title:"ê³µë¶€/ì§‘ì¤‘",category:"ìƒí™©",examples:["ì±… ë”ë¯¸","ì•ˆê²½","í˜•ê´‘íœ","ìŠ¤í†±ì›Œì¹˜","'ì§‘ì¤‘!'"] },
      { id:34,title:"ìš´ë™/ë‹¤ì´ì–´íŠ¸",category:"ìƒí™©",examples:["ì•„ë ¹","ì¤„ë„˜ê¸°","ë¬¼ë³‘","ë•€ë°©ìš¸","ì¹¼ë¡œë¦¬ ê²Œì´ì§€"] },
      { id:35,title:"ë¹„ ì˜¤ëŠ” ë‚ ",category:"ìƒí™©",examples:["ìš°ì‚°","ì¥í™”","ë¬¼ì›…ë©ì´","ì£¼ë£© ì„ ","ë¹—ë°©ìš¸"] },
      { id:36,title:"í­ì—¼/ë”ìœ„",category:"ìƒí™©",examples:["ë¶€ì±„ì§ˆ","ì–¼ìŒ","ì„ í’ê¸°","í•´ ëª¨ì","ë”ìœ„ ê²Œì´ì§€"] },
      { id:37,title:"í•œíŒŒ/ì¶¥ë‹¤",category:"ìƒí™©",examples:["ëª©ë„ë¦¬","ì…ê¹€","ê·€ë§ˆê°œ","ëˆˆì†¡ì´","íŒŒë¥´ë¥´ ë–¨ê¸°"] },
      { id:38,title:"ì¼ìš”ì¼ íë§",category:"ìƒí™©",examples:["ì†ŒíŒŒ","í•«ì´ˆì½”","ë‹´ìš”","ë…¸íŠ¸ë¶","íë§ ë§í’ì„ "] },
      { id:39,title:"ì›”ìš”ì¼ ìš°ìš¸",category:"ê°ì •",examples:["ì•ŒëŒì‹œê³„","í•œìˆ¨","ì´ˆì ìƒì€ ëˆˆ","ì»¤í”¼ ëŒ€ì","'ì›”ìš”ë³‘'"] },
      { id:40,title:"ì‡¼í•‘/ê²°ì œ",category:"ìƒí™©",examples:["ì¥ë°”êµ¬ë‹ˆ","ì¹´ë“œ ê²°ì œ","íƒë°° ë°•ìŠ¤","ì„¸ì¼ íƒœê·¸","ì˜ìˆ˜ì¦"] },
      { id:41,title:"ê²Œì„ ìŠ¹/íŒ¨",category:"ê°ì •",examples:["íŠ¸ë¡œí”¼","ê²Œì„íŒ¨ë“œ","ë³„ íš¨ê³¼","KO í…ìŠ¤íŠ¸","ìŠ¬í”ˆ ì´ëª¨ì§€"] },
      { id:42,title:"ì—¬í–‰/ì¶œë°œ",category:"ìƒí™©",examples:["ìºë¦¬ì–´","ë¹„í–‰ê¸°","ì§€ë„","í‹°ì¼“","ì‚¬ì§„"] },
      { id:43,title:"ê±´ê°•/ë³‘ì›",category:"ìƒí™©",examples:["ì²´ì˜¨ê³„","íŒŒìŠ¤","ë°´ë“œ","ì•½ ë´‰ì§€","'í›…' ê¸°ì¹¨"] },
      { id:44,title:"ì†Œì†Œí•œ í–‰ë³µ",category:"ê°ì •",examples:["ì‘ì€ ê½ƒ","ë°˜ì§ì´","ë”°ëœ»í•œ ë¯¸ì†Œ","ì¿ í‚¤","í•˜íŠ¸ ì "] },
      { id:45,title:"ì§‘ì¤‘ ì—…ë¬´/ë§ˆê°",category:"ìƒí™©",examples:["íƒ€íƒ€íƒ í‚¤ë³´ë“œ","ë§ˆê° íƒ€ì´ë¨¸","í¬ìŠ¤íŠ¸ì‡","ì»¤í”¼ 2ì”","ë‹¤í¬ì„œí´"] },
    ];

    /* ---------- ì €ì¥ì†Œ ---------- */
    const storage = {
      get(k, f){ try{ const r=localStorage.getItem(k); return r?JSON.parse(r):f; }catch(e){ return f; } },
      set(k, v){ try{ localStorage.setItem(k, JSON.stringify(v)); }catch(e){} }
    };

    /* ---------- ìƒíƒœ ---------- */
    let flipped=false, current=null;
    let usedIds=storage.get("emojiIdea.usedIds",[]);
    let history=storage.get("emojiIdea.history",[]);

    const $ = s => document.querySelector(s);
    const toast = (msg)=>{
      const el=document.createElement('div');
      el.className='fixed top-4 left-1/2 -translate-x-1/2 z-50 rounded-full bg-white text-black px-4 py-2 shadow-lg text-sm';
      el.textContent=msg; document.body.appendChild(el);
      setTimeout(()=>el.remove(),1600);
    };
    const save = ()=>{
      storage.set("emojiIdea.usedIds", usedIds);
      storage.set("emojiIdea.history", history);
    };

    /* ---------- ë Œë” ---------- */
    function render(){
      const currentObj = SITUATIONS.find(s=>s.id===current) || null;

      document.getElementById('app').innerHTML = `
        <div>
          <header class="flex items-center justify-between mb-4">
            <div>
              <h1 class="text-2xl sm:text-3xl font-bold tracking-tight">ì˜¤ëŠ˜ ê·¸ë¦´ ê·¸ë¦¼ì€?</h1>
              <p class="text-sm text-gray-300/90">ì¹´ì¹´ì˜¤í†¡ ì´ëª¨í‹°ì½˜ ì£¼ì œ ëœë¤ ì¶”ì²œê¸°</p>
            </div>
            <button id="btn-history" class="inline-flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2 hover:bg-white/10 transition focus-ring">ğŸ•˜ <span class="hidden sm:inline">íˆìŠ¤í† ë¦¬</span></button>
          </header>

          <div class="scene relative">
            <div id="card" class="card relative h-64 sm:h-72 w-full">
              <!-- ì•ë©´ -->
              <div class="card-face front absolute inset-0 rounded-3xl shadow-2xl overflow-hidden border border-emerald-300/25 visible-face">
                <div class="h-full w-full bg-gradient-to-br from-[#cfe8b6] via-[#b9d8a2] to-[#9dc58a] relative flex flex-col items-center justify-center text-emerald-950/90">
                  <div class="absolute inset-0" style="background:
                    radial-gradient(circle at 25% 20%, rgba(255,255,255,.45), transparent 45%),
                    radial-gradient(circle at 80% 10%, rgba(255,255,255,.25), transparent 55%)"></div>
                  <p class="text-[40px] sm:text-[48px] font-extrabold tracking-tight drop-shadow-sm">ì¡°ì•½ëŒ ë§ˆì„</p>
                  <p class="mt-2 text-sm opacity-80">ì¹´ë“œë¥¼ ë’¤ì§‘ì–´ ì£¼ì œë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
                </div>
              </div>
              <!-- ë’·ë©´ -->
              <div class="card-face card-back absolute inset-0 rounded-3xl shadow-2xl overflow-hidden border border-white/10 hidden-face">
                <div class="h-full w-full bg-gradient-to-b from-slate-900/70 to-slate-800/60 backdrop-blur-sm">
                  <div class="h-full w-full flex flex-col items-center justify-center p-6 text-center">
                    ${currentObj ? `
                      <div class="inline-flex items-center gap-2 text-amber-300/90 mb-2">âœ¨ <span class="text-sm">ì§œì”~ ì˜¤ëŠ˜ì˜ ìƒí™©</span></div>
                      <h2 class="text-xl sm:text-2xl font-bold leading-snug mb-2">${currentObj.title}</h2>
                      <div class="text-xs uppercase tracking-wide text-gray-300/80 mb-1">${currentObj.category}</div>
                      <div class="text-xs text-gray-300/80 mb-2">ê·¸ë¦¼ ìš”ì†Œ ì¶”ì²œ</div>
                      <div class="flex flex-wrap items-center justify-center gap-2">
                        ${currentObj.examples.map(ex=>`<span class="text-xs rounded-full bg-white/10 border border-white/10 px-3 py-1">${ex}</span>`).join('')}
                      </div>
                    ` : `
                      <p class="text-sm">ì•„ì§ ì¹´ë“œë¥¼ ë’¤ì§‘ì§€ ì•Šì•˜ì–´ìš”</p>
                      <p class="text-xs text-gray-400">í„°ì¹˜/í´ë¦­ìœ¼ë¡œ ì‹œì‘!</p>
                    `}
                  </div>
                </div>
              </div>
            </div>
            <button id="btn-flip" class="absolute inset-0 rounded-3xl focus-ring" aria-label="ì¹´ë“œ ë’¤ì§‘ê¸°"></button>
          </div>

          <div class="mt-4 grid grid-cols-2 gap-2">
            <button id="btn-new" class="flex items-center justify-center gap-2 rounded-xl bg-white/10 hover:bg-white/20 border border-white/10 px-3 py-2 transition focus-ring">ğŸ”€ <span>ìƒˆ ì¹´ë“œ</span></button>
            <button id="btn-copy" class="flex items-center justify-center gap-2 rounded-xl bg-white/10 hover:bg-white/20 border border-white/10 px-3 py-2 transition focus-ring">ğŸ“‹ <span>ë³µì‚¬</span></button>
          </div>

          <div class="mt-3 text-xs text-gray-300/80 flex items-center justify-between">
            <span>ì¶”ì²œ ì£¼ì œëŠ” ê³„ì† ì¶”ê°€ ì¤‘!</span>
            <span class="opacity-70">ì¡°ì•½ëŒ ë§ˆì„</span>
          </div>
        </div>
      `;

      bindEvents();
      updateFlip(); // ë Œë” í›„ í˜„ì¬ flip ìƒíƒœ ë™ê¸°í™”
    }

    /* ---------- ì• ë‹ˆë©”ì´ì…˜ë§Œ í† ê¸€ (DOM ì¬ìƒì„± ì•ˆ í•¨) ---------- */
    function updateFlip(){
      const card = document.getElementById('card');
      if (!card) return;
      card.classList.toggle('is-flipped', flipped);

      const front = card.querySelector('.front');
      const back  = card.querySelector('.card-back');
      if (front && back){
        front.classList.toggle('hidden-face', flipped);
        front.classList.toggle('visible-face', !flipped);
        back .classList.toggle('hidden-face', !flipped);
        back .classList.toggle('visible-face', flipped);
      }
    }

    function bindEvents(){
      document.getElementById('btn-flip').onclick = () => {
        if (current===null){           // ì²« ë’¤ì§‘ê¸°: ì£¼ì œ ë½‘ê³  ì• ë‹ˆë©”ì´ì…˜
          drawNew();                   // ë‚´ìš© ê°±ì‹ 
          render();                    // DOM ìƒì„±
        }
        flipped = !flipped;
        updateFlip();                  // âœ… DOM ì¬ìƒì„± ì—†ì´ íšŒì „ë§Œ
      };

      document.getElementById('btn-new').onclick = () => {
        drawNew();
        flipped = false;               // ìƒˆ ì¹´ë“œëŠ” ì•ë©´ë¶€í„°
        render();                      // ë‚´ìš©/ë²„íŠ¼ ìƒíƒœ ê°±ì‹  í›„ updateFlip í˜¸ì¶œë¨
      };

      document.getElementById('btn-copy').onclick = async () => {
        const obj = SITUATIONS.find(s=>s.id===current);
        if(!obj) return;
        try{ await navigator.clipboard.writeText(`ì˜¤ëŠ˜ì˜ ì´ëª¨í‹°ì½˜ ì£¼ì œ: ${obj.title}`); toast('ë³µì‚¬í–ˆì–´ìš”!'); }
        catch{ toast('ë³µì‚¬ ì‹¤íŒ¨'); }
      };

      document.getElementById('btn-history').onclick = openHistory;
    }

    /* ---------- ì¶”ì²œ & íˆìŠ¤í† ë¦¬ ---------- */
    function drawNew(){
      const pool = SITUATIONS;
      const next = pool[Math.floor(Math.random()*pool.length)];
      current = next.id;
      usedIds = Array.from(new Set([...usedIds, next.id]));
      history = [{id: next.id, t: Date.now()}, ...history].slice(0, 50);
      save();
    }

    function openHistory(){
      const wrap=document.createElement('div');
      wrap.className='fixed inset-0 z-50 flex items-center justify-center';
      wrap.innerHTML=`
        <div class="absolute inset-0 bg-black/60"></div>
        <div class="relative w-[92vw] max-w-lg rounded-2xl border border-white/10 bg-slate-900/90 backdrop-blur p-4 text-white max-h-[70vh] overflow-y-auto">
          <div class="flex items-center justify-between mb-2">
            <h3 class="text-lg font-semibold">íˆìŠ¤í† ë¦¬</h3>
            <button id="close" class="rounded-lg bg-white/5 hover:bg-white/10 p-1">âœ–ï¸</button>
          </div>
          ${history.length===0? '<p class="text-sm text-gray-300/80">ì•„ì§ íˆìŠ¤í† ë¦¬ê°€ ì—†ì–´ìš”. ì¹´ë“œë¥¼ ëª‡ ë²ˆ ë½‘ì•„ë³´ì„¸ìš”!</p>': ''}
          <div class="space-y-3 pr-1">
            ${history.map(h=>{
              const it=SITUATIONS.find(s=>s.id===h.id);
              const date=new Date(h.t).toLocaleString();
              return `<div class="flex items-center justify-between rounded-xl bg-white/5 border border-white/10 p-3">
                <div>
                  <p class="text-sm font-medium">${it?.title || '(ì‚­ì œë¨)'}</p>
                  <p class="text-xs text-gray-300/70">${it?.category || ''} Â· ${date}</p>
                </div>
                <div class="flex items-center gap-2">
                  <button class="rounded-lg border border-white/15 bg-white/5 px-2 py-1 text-xs hover:bg-white/10" data-copy="${it?.title || ''}">ë³µì‚¬</button>
                  <button class="rounded-lg border border-white/15 bg-white/5 px-2 py-1 text-xs hover:bg-white/10" data-view="${it?.id || ''}">ë³´ê¸°</button>
                </div>
              </div>`;
            }).join('')}
          </div>
        </div>`;
      document.body.appendChild(wrap);
      wrap.querySelector('#close').onclick=()=> wrap.remove();
      wrap.querySelectorAll('[data-copy]').forEach(btn=> btn.onclick = async (e)=>{
        const val=e.currentTarget.getAttribute('data-copy'); if(!val) return;
        try{ await navigator.clipboard.writeText(val); toast('ë³µì‚¬í–ˆì–´ìš”'); }catch{ toast('ë³µì‚¬ ì‹¤íŒ¨'); }
      });
      wrap.querySelectorAll('[data-view]').forEach(btn=> btn.onclick = (e)=>{
        const id=Number(e.currentTarget.getAttribute('data-view')); if(!id) return;
        current=id; flipped=true; save(); updateFlip(); render(); wrap.remove();
      });
    }

    // ì´ˆê¸° ë Œë”
    render();
  </script>
</body>
</html>
